# 金融交易系统配置模板
# 使用方法: 复制此文件为 config.yaml 并填入真实值
# cp config/default.yaml.example config/config.yaml

# Alpha Vantage API 配置
alphavantage:
  # 从 https://www.alphavantage.co/support/#api-key 获取 API Key
  api_key: "your_api_key_here"
  # API plan 类型: free / premium
  #   free    -> calls_per_minute: 5, calls_per_day: 500
  #   premium -> calls_per_minute: 75, calls_per_day: unlimited
  plan: "free"
  calls_per_minute: 5
  calls_per_day: 500

# FRED API Key（宏观数据，用于估值扫描）
# 免费注册: https://fred.stlouisfed.org/docs/api/api_key.html
# 也可通过环境变量 FRED_API_KEY 设置
fred_api_key: ""

# 数据库配置
database:
  # SQLite（默认）
  url: "sqlite:///./data/cache/market_data.db"
  # PostgreSQL（可选，用于生产环境）
  # url: "postgresql://user:password@localhost:5432/quant_db"
  pool_size: 5
  echo: false

# Redis 配置（可选，用于高性能缓存）
redis:
  url: "redis://localhost:6379/0"

# GPU 配置
gpu:
  enabled: true
  device_ids: [0, 1]        # 使用的 GPU 设备
  memory_fraction: 0.8      # GPU 内存分配比例

# 日志配置
logging:
  level: "INFO"
  file: "./logs/quant_system.log"
  rotation: "10 MB"
  retention: "1 week"

# 券商配置
broker:
  commission_rate: 0.001    # 0.1%
  min_commission: 1.0       # 最低 $1
  slippage_rate: 0.0005     # 0.05%
  short_selling_enabled: false

# 模拟交易配置
initial_capital: 100000.0

# 调试模式
debug: false
testing: false

# Web 服务配置
web:
  host: "0.0.0.0"
  port: 8443
  debug: false
  ssl:
    enabled: true
    keyfile: "/workspace/python/alchemist/web/ssl/key.pem"
    certfile: "/workspace/python/alchemist/web/ssl/cert.pem"
  # 域名配置
  domain: "your-domain.example.com"

# 估值扫描配置
valuation:
  # 默认因子权重（四维合计 = 1.0）
  weights:
    relative: 0.30        # 相对估值 (PE/PB/PS/PEG/EV-EBITDA/P-FCF)
    absolute: 0.25        # 绝对估值 (DCF + 剩余收益模型)
    sentiment: 0.25       # 情绪面 (RSI/空头/内部人/量价)
    macro: 0.20           # 宏观环境 (Fed模型/20法则/巴菲特指标)
  # DCF 模型参数
  dcf:
    projection_years: 5           # 预测年数
    terminal_growth_rate: 0.025   # 永续增长率 2.5%
    equity_risk_premium: 0.05     # 股权风险溢价 5%
    scenarios:
      optimistic_multiplier: 1.2  # 乐观情景增长率倍数
      pessimistic_multiplier: 0.5 # 悲观情景增长率倍数
  # 扫描默认参数
  default_lookback: "3M"          # 默认时间窗口
  default_top_n: 50               # 默认返回前N只
  min_market_cap: 100000000       # 最低市值 (1亿美元)
  min_avg_volume: 100000          # 最低日均成交量
  # 缓存 TTL
  overview_cache_ttl_days: 7      # OVERVIEW 数据缓存天数
  financials_cache_ttl_days: 30   # 财务报表数据缓存天数
